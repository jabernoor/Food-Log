{"version":3,"sources":["../../src/users/create.js"],"names":["create","params","Promise","resolve","reject","then","rows","id","catch","error","findOrCreate","sequelize","transaction","t","console","log","User","where","email","defaults","spread","userResult","created"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEO,MAAMA,0BAAUC,MAAD,IAAY;AAC9B,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,gCAAQ,YAAR,EAAsBH,MAAtB,EAA8BI,IAA9B,CAAmCC,QAAQ;AACvCH,oBAAQG,KAAKC,EAAb;AACH,SAFD,EAEGC,KAFH,CAESC,SAAS;AACdL,mBAAOK,KAAP;AACH,SAJD;AAKH,KANM,CAAP;AAOH,CARM;;AAUA,MAAMC,sCAAgBT,MAAD,IAAY;AACpCU,uBAAUC,WAAV,CAAsB,UAAUC,CAAV,EAAa;AAC/BC,gBAAQC,GAAR,CAAYd,MAAZ;AACA,eAAOe,qBAAKN,YAAL,CAAkB;AACrBO,mBAAO;AACHV,oBAAIN,OAAOM,EADR;AAEHW,uBAAOjB,OAAOiB;AAFX,aADc;AAKrBC,sBAAUlB,MALW;AAMrBW,yBAAaC;AANQ,SAAlB,EAOJO,MAPI,CAOG,UAAUC,UAAV,EAAsBC,OAAtB,EAA+B;AACrC,gBAAIA,OAAJ,EAAa;AACTR,wBAAQC,GAAR,CAAY,SAAZ;AACH,aAFD,MAEO;AACHD,wBAAQC,GAAR,CAAY,aAAZ;AACH;AACJ,SAbM,CAAP;AAcH,KAhBD;AAiBH,CAlBM","file":"create.js","sourcesContent":["import execute from '../database/executor'\nimport sequelize from '../database/database'\nimport User from '../database/schemes/UserSchema'\n\nexport const create = (params) => {\n    return new Promise((resolve, reject) => {\n        execute('createUser', params).then(rows => {\n            resolve(rows.id);\n        }).catch(error => {\n            reject(error);\n        });\n    })\n};\n\nexport const findOrCreate = (params) => {\n    sequelize.transaction(function (t) {\n        console.log(params);\n        return User.findOrCreate({\n            where: {\n                id: params.id,\n                email: params.email\n            },\n            defaults: params,\n            transaction: t\n        }).spread(function (userResult, created) {\n            if (created) {\n                console.log('created');\n            } else {\n                console.log('not created');\n            }\n        });\n    });\n};\n"]}