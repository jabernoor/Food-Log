{"version":3,"sources":["../../src/oauth/google.js"],"names":["passport","use","GoogleStrategy","clientID","config","google_client_id","clientSecret","google_client_secret","callbackURL","google_callback_url","accessToken","refreshToken","profile","done","params","id","displayName","emails","value","photos","provider","serializeUser","user","deserializeUser"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AAEAA,mBAASC,GAAT,CAAa,IAAIC,mCAAJ,CAAmB;AACxBC,cAAUC,iBAAOC,gBADO;AAExBC,kBAAcF,iBAAOG,oBAFG;AAGxBC,iBAAaJ,iBAAOK;AAHI,CAAnB,EAKT,UAAUC,WAAV,EAAuBC,YAAvB,EAAqCC,OAArC,EAA8CC,IAA9C,EAAoD;AAChD,UAAMC,SAAS,EAAf;;AAEAA,WAAO,IAAP,IAAeF,QAAQG,EAAvB;AACAD,WAAO,MAAP,IAAiBF,QAAQI,WAAzB;AACAF,WAAO,OAAP,IAAkBF,QAAQK,MAAR,CAAe,CAAf,EAAkBC,KAApC;AACAJ,WAAO,WAAP,IAAsBF,QAAQO,MAAR,CAAe,CAAf,EAAkBD,KAAxC;AACAJ,WAAO,eAAP,IAA0BF,QAAQQ,QAAlC;;AAEA,8BAAaN,MAAb;;AAEA,WAAOD,KAAK,IAAL,EAAWD,OAAX,CAAP;AACH,CAjBQ,CAAb;;AAoBAZ,mBAASqB,aAAT,CAAuB,UAASC,IAAT,EAAeT,IAAf,EAAqB;AACxCA,SAAK,IAAL,EAAWS,IAAX;AACH,CAFD;AAGAtB,mBAASuB,eAAT,CAAyB,UAASD,IAAT,EAAeT,IAAf,EAAqB;AAC1CA,SAAK,IAAL,EAAWS,IAAX;AACH,CAFD;;kBAIetB,kB","file":"google.js","sourcesContent":["import passport from 'passport';\nimport {OAuth2Strategy as GoogleStrategy} from \"passport-google-oauth\";\nimport config from './config.json';\nimport {findOrCreate} from '../users/create'\n\npassport.use(new GoogleStrategy({\n        clientID: config.google_client_id,\n        clientSecret: config.google_client_secret,\n        callbackURL: config.google_callback_url\n    },\n    function (accessToken, refreshToken, profile, done) {\n        const params = {};\n\n        params['id'] = profile.id;\n        params['name'] = profile.displayName;\n        params['email'] = profile.emails[0].value;\n        params['imagePath'] = profile.photos[0].value;\n        params['oauthProvider'] = profile.provider;\n\n        findOrCreate(params);\n\n        return done(null, profile);\n    }\n));\n\npassport.serializeUser(function(user, done) {\n    done(null, user);\n});\npassport.deserializeUser(function(user, done) {\n    done(null, user);\n});\n\nexport default passport;\n"]}