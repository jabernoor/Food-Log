{"version":3,"sources":["../../../../src/database/schemes/crud/crud.js"],"names":["UserCrud","FoodProviderCrud","OrderCrud","OrderEntryCrud","UnitCrud","findByPK","schema","id","console","debug","cacheKey","cacheKeyPrefix","value","cacheService","get","JSON","parse","findByPk","raw","set","stringify"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;QAGIA,Q,GAAAA,kB;QACAC,gB,GAAAA,0B;QACAC,S,GAAAA,mB;QACAC,c,GAAAA,wB;QACAC,Q,GAAAA,kB;AAKG,IAAIC,8BAAW,OAAOC,MAAP,EAAeC,EAAf,KAAsB;AACxCC,YAAQC,KAAR,CAAc,yCAAd;AACA,UAAMC,WAAWJ,OAAOK,cAAP,GAAwBJ,EAAzC;AACA,QAAIK,QAAQ,MAAMC,uBAAaC,GAAb,CAAiBJ,QAAjB,CAAlB;AACA,QAAIE,SAAS,IAAb,EAAmB;AACfJ,gBAAQC,KAAR,CAAe,oCAAmCC,QAAS,EAA3D;AACAE,gBAAQG,KAAKC,KAAL,CAAWJ,KAAX,CAAR;AACH,KAHD,MAGO;AACHJ,gBAAQC,KAAR,CAAe,sDAAqDC,QAAS,EAA7E;AACAE,gBAAQ,MAAMN,OAAOW,QAAP,CAAgBV,EAAhB,EAAoB;AAC9BW,iBAAK;AADyB,SAApB,CAAd;AAGAV,gBAAQC,KAAR,CAAcG,KAAd;AACA,YAAIA,SAAS,IAAb,EAAmB;AACfJ,oBAAQC,KAAR,CAAe,oBAAmBC,QAAS,EAA3C;AACAG,mCAAaM,GAAb,CAAiBT,QAAjB,EAA2BK,KAAKK,SAAL,CAAeR,KAAf,CAA3B;AACH;AACJ;AACD,WAAOA,KAAP;AAEH,CApBM","file":"crud.js","sourcesContent":["import FoodProviderCrud from './food-provider-crud'\nimport OrderCrud from './order-crud'\nimport OrderEntryCrud from './order-entry-crud'\nimport UserCrud from './user-crud'\nimport UnitCrud from './unit-crud'\nimport cacheService from '../../../cache/cache-service'\n\nexport {\n    UserCrud,\n    FoodProviderCrud,\n    OrderCrud,\n    OrderEntryCrud,\n    UnitCrud\n}\n\n\n\nexport let findByPK = async (schema, id) => {\n    console.debug(\"Trying to get values from cache ...... \");\n    const cacheKey = schema.cacheKeyPrefix + id;\n    let value = await cacheService.get(cacheKey);\n    if (value != null) {\n        console.debug(`[CACHE HIT] found value for key: ${cacheKey}`);\n        value = JSON.parse(value);\n    } else {\n        console.debug(`[CACHE MISS] getting values from database for key: ${cacheKey}`);\n        value = await schema.findByPk(id, {\n            raw: true\n        });\n        console.debug(value);\n        if (value != null) {\n            console.debug(`[CACHE SET] key: ${cacheKey}`);\n            cacheService.set(cacheKey, JSON.stringify(value));\n        }\n    }\n    return value;\n\n}"]}